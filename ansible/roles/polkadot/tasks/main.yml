---
- name: Create directory to clone Polkadot repo
  file:
    path: /polkadot/node
    state: directory
    mode: '0755'
  become: yes

- name: Clone Polkadot
  git:
    repo: https://github.com/paritytech/polkadot.git
    dest: /polkadot/node
  become: yes

- name: Switch to the polkadot installation directory
  shell: |
      cd /polkadot/node

- name: Run initialisation script
  shell: |
      ./scripts/init.sh  
  
- name: Build Polkadot binary
  shell: |
    sudo cargo build --release

- name: Run Polkadot
  shell: ./target/release/polkadot --name "Derek's Polkadot Node"
